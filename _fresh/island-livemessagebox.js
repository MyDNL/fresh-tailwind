import{b as l,c as d,d as m}from"./chunk-FW4PXA2B.js";import"./chunk-FPYH56NP.js";import{c,d as f}from"./chunk-UCKURDVD.js";import"./chunk-2GUEMEWN.js";import"./chunk-7XBR77FJ.js";import{a as s}from"./chunk-3MXJYX4G.js";import"./chunk-VZ4DKIQG.js";import"./chunk-Z47A3HLT.js";function p(){let a=c([]),g=3,r=0;return f(()=>{let e=new EventSource("/api/sse"),o=n=>{let t=JSON.parse(n.data);a.value=[...t],t[0].effect==="Stars"&&l(),t[0].effect==="Snow"&&d(),t[0].effect==="Fener"&&m()},i=async()=>{if(r<g){r+=1,e.close();let n=5e3+Math.random()*5e3;await new Promise(t=>setTimeout(t,n)),e=new EventSource("/api/sse"),e.addEventListener("message",o),e.addEventListener("error",i)}else console.error("Exceeded max retry attempts. Stopping retries.")};return e.addEventListener("message",o),e.addEventListener("error",i),()=>{e.close()}}),s("div",{class:"pt-6",children:s("ul",{children:a.value.map(e=>s("li",{class:"text-xl text-center text-base-content",children:e.message}))})})}export{p as LiveMessageBox};
